{{- if .Values.dnsProviders.cloudflare.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: cloudflare-api-token
  namespace: cert-manager
  labels:
    {{- include "dhi-cert-manager.labels" . | nindent 4 }}
  annotations:
    helm.sh/hook: pre-install,pre-upgrade
    helm.sh/hook-weight: "-15"
type: Opaque
stringData:
  api-token: {{ .Values.dnsProviders.cloudflare.apiToken | quote }}
---
{{- end }}

{{- if .Values.dnsProviders.route53.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: route53-credentials
  namespace: cert-manager
  labels:
    {{- include "dhi-cert-manager.labels" . | nindent 4 }}
  annotations:
    helm.sh/hook: pre-install,pre-upgrade
    helm.sh/hook-weight: "-15"
type: Opaque
stringData:
  access-key-id: {{ .Values.dnsProviders.route53.accessKeyId | quote }}
  secret-access-key: {{ .Values.dnsProviders.route53.secretAccessKey | quote }}
---
{{- end }}

{{- if .Values.dnsProviders.googleCloudDNS.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: google-cloud-dns
  namespace: cert-manager
  labels:
    {{- include "dhi-cert-manager.labels" . | nindent 4 }}
  annotations:
    helm.sh/hook: pre-install,pre-upgrade
    helm.sh/hook-weight: "-15"
type: Opaque
stringData:
  service-account.json: {{ .Values.dnsProviders.googleCloudDNS.serviceAccountKey | quote }}
---
{{- end }}

{{- if .Values.security.tlsSecrets.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: guardian-shield-ca-key-pair
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "dhi-cert-manager.labels" . | nindent 4 }}
  annotations:
    cert-manager.io/issuer-name: {{ include "dhi-cert-manager.fullname" . }}-ca-issuer
type: kubernetes.io/tls
data:
  tls.crt: {{ .Values.security.tlsSecrets.caCrt | b64enc }}
  tls.key: {{ .Values.security.tlsSecrets.caKey | b64enc }}
{{- end }}